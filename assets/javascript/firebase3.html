<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sign-Up Today!</title>

	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>

<div class="container">

	<br>

	<!-- Jumbotron -->
	<div class="jumbotron">
		<h1 class="text-center">Highest Bidder</h1>
	</div>

	<div class="row">

		<!-- Sign-Up Panel-->
		<div class="col-lg-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title"></h3>
				</div>
				<div class="panel-body">

					<!-- Sign-up Form (note the various input "types")-->
					<form role="form">
						<div class="form-group">
							<label for="text">Your Name:</label>
							<input type="text" class="form-control" id="nameinput">
						</div>
						<div class="form-group">
							<label for="text">Your Price:</label>
							<input type="number" class="form-control" id="emailinput">
						</div>

						<button type="submit" class="btn btn-default" id="addUser">Submit</button>
					</form>

				</div>
			</div>
		</div>

		<!-- Most Recent Member Panel -->
		<div class="col-lg-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Bids</h3>
				</div>
				<div class="panel-body" id="recentMember">
					<h2 id="name"></h2>
					<h4 id="highestbidder"></h4>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Latest compiled and minified CSS & JS -->
<script src="https://code.jquery.com/jquery.js"></script>

<!-- LINK TO FIREBASE GOES HERE -->
<script src="https://www.gstatic.com/firebasejs/3.6.0/firebase.js"></script>

<script>

// ========================================== START CODING BELOW!!

// Initialize Firebase
var config = {
    apiKey: "AIzaSyAxhtcA0-mHxosqlzjcoLGPnNO89v8wdDM",
    authDomain: "bidder-21aa1.firebaseapp.com",
    databaseURL: "https://bidder-21aa1.firebaseio.com",
    storageBucket: "bidder-21aa1.appspot.com",
    messagingSenderId: "10688142812"
  };
	firebase.initializeApp(config);

	// VARIABLES
	// --------------------------------------------------------------------------------

	// 
	var database = firebase.database();

// Create a variable to reference the database
	var name = 'No one';
	var price = 0;
	var hBidder = name;
	var hPrice = price;

// Capture Button Click
$("#addUser").on("click", function() {

	// YOUR TASK!!!
	name = $('#nameinput').val().trim();
	price = $('#emailinput').val().trim();

	var dataP = database.ref().snapshot.val().price;

	if(dataP < price){
	console.log(name);
	// Code in the logic for storing and retrieving the most recent user.
	// Dont forget to handle the "initial load"
	console.log(initialValue);
		database.ref().set({
			name: name,
			price: price,
		});
	}

	// Don't refresh the page!
	return false;
});

database.ref().on("value", function(snapshot) {

		// 
		console.log(snapshot.val());

		hBidder = snapshot.val().name;
		hPrice = snapshot.val().price;

		// 
		$("#name").html(snapshot.val().name);
		$("#highestbidder").html(snapshot.val().price);


		//  
		// initialValue = snapshot.val().clickCount;

	// 
	}, function (errorObject) {

		// 
	  	console.log("The read failed: " + errorObject.code);
	
	});

// Create Firebase "watcher" (.on("value"))

// Create Error Handling

</script>

</body>
</html>